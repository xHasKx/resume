<!DOCTYPE html>
<html lang="en">
<head>
	<!-- Google tag (gtag.js) -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-FYC4G7HEPP"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());
		gtag('config', 'G-FYC4G7HEPP');
	</script>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
	<link rel="stylesheet" href="./css/styles.css">
	<link rel="icon" type="image/png" href="images/favicon.png">
	<title><%= name %>, CV</title>
	<script src="https://static.fxdev.net/nocache/emptyscript.js" async></script>
</head>
<body>
	<div class="page">
		<header>
			<div>(page is still under construction)</div>
			<h1>&lt;cv&gt;</h1>
			<h2 class="property">
				<%= name %>
			</h2>
			<h3 class="const"><%= title %></h3>

			<div class="flex-wrap">
				<div id="photo" class="flex-column info-section">
					<img src="<%= photo %>" alt="photo">
				</div>

				<div class="flex-column second-column">
					<h3 id="contacts">
						<a href="#contacts">#</a>
						<span class="keyword">
							<label class="toggle-label" for="contacts-toggle">contacts</label><button id="contacts-toggle" class="toggle" data-toggle="contacts-content" data-opened="true"></button>
						</span>
					</h3>
					<ul id="contacts-content" class="info-section">
						<% for (const item of contacts) { %>
							<li>
								<% if (item.email) { %>
									<strong>E-mail</strong>: <a target="_blank" href="mailto:<%= item.email %>"><%= item.email %></a>
								<% } else if (item.title) { %>
									<a target="_blank" href="<%= item.url %>"><%= item.title %></a>
								<% } else { %>
									<a target="_blank" href="<%= item.url %>"><%= item.url %></a>
								<% } %>
							</li>
						<% } %>
					</ul>

					<h3 id="languages">
						<a href="#languages">#</a>
						<span class="keyword">
							<label class="toggle-label" for="languages-toggle">languages</label><button id="languages-toggle" class="toggle" data-toggle="languages-content" data-opened="true"></button>
						</span>
					</h3>
					<ul id="languages-content" class="info-section">
						<% for (const item of languages) { %>
							<li><%= item %></li>
						<% } %>
					</ul>
				</div>
			</div>
		</header>

		<main>
			<h3 id="summary">
				<a href="#summary">#</a>
				<span class="keyword">
					<label class="toggle-label" for="summary-toggle">summary</label><button id="summary-toggle" class="toggle" data-toggle="summary-content" data-opened="true"></button>
				</span>
			</h3>
			<div id="summary-content" class="indentation info-section"><%- markdown(summary) %></div>

			<h3 id="history">
				<a href="#history">#</a>
				<span class="keyword">
					<label class="toggle-label" for="history-toggle">history (long read)</label><button id="history-toggle" class="toggle" data-toggle="history-content"></button>
				</span>
			</h3>
			<div id="history-content" class="indentation info-section"><%- markdown(history) %></div>

			<h3 id="technologies">
				<a href="#technologies">#</a>
				<span class="keyword">
					<label class="toggle-label" for="technology-toggle">technologies</label><button id="technology-toggle" class="toggle" data-toggle="technology-content" data-opened="true"></button>
				</span>
			</h3>
			<div id="technology-content" class="info-section">
				<div class="flex-column">
					<div class="expand-container">
						<a href="#" class="expand-all">(expand all)</a>
					</div>
					<% for (const i in technologies) {
						const item = technologies[i];
						%>
						<div id="<%= item.id %>" class="flex-column collapsible">
							<label class="toggle-label" for="technology-<%= i %>-toggle">
								<div class="flex-row">
									<div class="technology-title">
										<button id="technology-<%= i %>-toggle" class="toggle" data-toggle="technology-<%= i %>-content"></button>
										<span class="const"><%= item.title %></span>&nbsp;
									</div>
									<div>
										<span class="comment">// <%= item.experience %></span>
									</div>
								</div>
							</label>
							<div id="technology-<%= i %>-content">
								<% if (item.description) { %>
									<p class="indentation">
										<%= item.description %>
									</p>
								<% } %>
								<% if (item.projects.length) { %>
									<p class="indentation">
										<strong>Projects:</strong>
										<%_ for (const j in item.projects) {
											const proj = item.projects[j];
											_%>
											<%_ if (j > 0) { _%>, <% } _%>
											<a href="#<%= proj.id %>"><%= proj.title %></a><%_ } _%>
									</p>
								<% } %>
							</div>
						</div>
					<% } %>
				</div>
			</div>

			<h3 id="skills">
				<a href="#skills">#</a>
				<span class="keyword">
					<label class="toggle-label" for="skills-toggle">skills</label><button id="skills-toggle" class="toggle" data-toggle="skills-content" data-opened="true"></button>
				</span>
			</h3>
			<ul id="skills-content" class="info-section">
				<% for (const item of skills) { %>
					<li>
						<% if (item.description) { %>
							<strong><%= item.title %></strong>:
							<%= item.description %>
						<% } else { %>
							<strong><%= item.title %></strong>
						<% } %>
					</li>
				<% } %>
			</ul>

			<h3 id="work-experience">
				<a href="#work-experience">#</a>
				<span class="keyword">
					<label class="toggle-label" for="work-experience-toggle">work experience</label><button id="work-experience-toggle" class="toggle" data-toggle="work-experience-content" data-opened="true"></button>
				</span>
			</h3>
			<ul id="work-experience-content" class="info-section">
				<div class="expand-container">
					<a href="#" class="expand-all">(expand all)</a>
				</div>
				<div class="flex-column">
					<% for (const i in work_experience) { // TODO: order
						const item = work_experience[i];
						%>
						<div id="<%= item.id %>" class="collapsible">
							<div class="flex-row flex-wrap">
								<div class="wexp-years">
									<span class="comment"><%= item.years[0] %> - <%= item.years[1] %></span>
								</div>
								<div class="wexp-company">
									at&nbsp;
									<span class="property">
										<% if (item.company_url) { %>
											<a target="_blank" href="<%= item.company_url %>"><%= item.company %></a>
										<% } else { %>
											<%= item.company %>
										<% } %>
									</span>
								</div>
								<div class="wexp-position">
									<span class="const"><%= item.position %></span>
								</div>
							</div>
							<div>
								<button id="<%= item.id %>-toggle" class="toggle" data-toggle="<%= item.id %>-content" data-opened="true"></button> <label class="toggle-label" for="<%= item.id %>-toggle"><strong>Project</strong>:</label>
								<% if (item.project_url) { %>
									<a target="_blank" href="<%= item.project_url %>"><%= item.project %></a>
								<% } else { %>
									<%= item.project %>
								<% } %>
								<div id="<%= item.id %>-content">
									<%= item.description %>
									<!-- TODO: i_did, languages, achievements -->
								</div>
							</div>
						</div>
					<% } %>
				</div>
			</ul>

			<h3 id="projects">
				<a href="#projects">#</a>
				<span class="keyword">
					<label class="toggle-label" for="projects-toggle">projects</label><button id="projects-toggle" class="toggle" data-toggle="projects-content" data-opened="true"></button>
				</span>
			</h3>
			<div id="projects-content" class="info-section">
				<div class="expand-container">
					<a href="#" class="expand-all">(expand all)</a>
				</div>
				<% for (const i in projects) {
					const item = projects[i];
					%>
					<div class="collapsible" id="<%= item.id %>">
						<label class="toggle-label" for="project-<%= i %>-toggle">
							<div>
								<button id="project-<%= i %>-toggle" class="toggle" data-toggle="project-<%= i %>-content"></button>
								<span class="const"><%= item.title %></span>
							</div>
							<div class="indentation">
								<div>
									<span class="comment">// <%= item.comment %></span>
								</div>
								<a target="_blank" href="<%= item.url %>" class="url-break"><%= item.url %></a>
							</div>
						</label>
						<div id="project-<%= i %>-content">
							<% if (item.description) { %>
								<p class="indentation">
									<%= item.description %>
								</p>
							<% } %>
							<% if (item.i_did) { %>
								<p class="indentation">
									<strong>What I did:</strong>
									<%= item.i_did %>
								</p>
							<% } %>
							<% if (item.technologies.length) { %>
								<p class="indentation">
									<strong>Technologies:</strong>
									<%_ for (const j in item.technologies) {
										const tech = item.technologies[j];
										_%>
										<%_ if (j > 0) { _%>, <% } _%>
										<a href="#<%= tech.id %>"><%= tech.title %></a><%_ } _%>
								</p>
							<% } %>
						</div>
					</div>
				<% } %>
			</div>

			<h3 id="education">
				<a href="#education">#</a>
				<span class="keyword">
					<label class="toggle-label" for="education-toggle">education</label><button id="education-toggle" class="toggle" data-toggle="education-content" data-opened="true"></button>
				</span>
			</h3>
			<ul id="education-content" class="info-section">
				<% for (const item of education) { %>
					<li>
						<strong><%= item.title %></strong>,
						<span class="comment"><%= item.year %></span>
						at <%= item.at %>
					</li>
				<% } %>
			</ul>
		</main>

		<footer>
			<h3 id="notes">
				<a href="#notes">#</a>
				<span class="keyword">
					<label class="toggle-label" for="notes-toggle">notes</label><button id="notes-toggle" class="toggle" data-toggle="notes-content"></button>
				</span>
			</h3>
			<div id="notes-content" class="indentation info-section">
				<p>
					Source code of this page can be found
					<a target="_blank" href="<%= cv_page_source %>">on GitHub</a>.
					Implementation was inspired by the <a target="_blank" href="https://jsonresume.org/">jsonresume.org</a> project.
				</p>
				<p>
					Page built: <%= new Date().toGMTString() %>
				</p>
			</div>
		</footer>
	</div>
	<script src="./js/main.js"></script>
</body>
</html>
